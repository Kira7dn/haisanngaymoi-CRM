
> haisanngaymoi-crm@0.1.0 test
> vitest infrastructure/queue/__tests__/order-worker.integration.spec.ts --reporter=verbose


[1m[46m RUN [49m[22m [36mv4.0.7 [39m[90mE:/Workspace/haisanngaymoi-CRM[39m

[90mstdout[2m | infrastructure/queue/__tests__/order-worker.integration.spec.ts
[22m[39m[dotenv@17.2.3] injecting env (17) from .env.local -- tip: âš™ï¸  specify custom .env file path with { path: '/custom/path/.env' }

 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mWorker initialization[2m > [22mshould create worker with correct configuration[33m 537[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mJob processing - checkPaymentStatus[2m > [22mshould process checkPaymentStatus job successfully[33m 743[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mJob processing - checkPaymentStatus[2m > [22mshould process checkPaymentStatus job without miniAppId[33m 764[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mJob processing - checkPaymentStatus[2m > [22mshould handle payment gateway errors[33m 764[2mms[22m[39m
[90mstdout[2m | infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22m[2mOrder Worker Integration Tests[2m > [22m[2mJob processing - unknown job types[2m > [22m[2mshould fail jobs with unknown job type
[22m[39mAdded job with ID: 1, name: unknownJob

[90mstdout[2m | infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22m[2mOrder Worker Integration Tests[2m > [22m[2mJob processing - unknown job types[2m > [22m[2mshould fail jobs with unknown job type
[22m[39mReceived failed event for job 1: Unknown job type: unknownJobType

 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mJob processing - unknown job types[2m > [22mshould fail jobs with unknown job type[33m 743[2mms[22m[39m
[90mstdout[2m | infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22m[2mOrder Worker Integration Tests[2m > [22m[2mConcurrent job processing[2m > [22m[2mshould process multiple jobs concurrently
[22m[39mConcurrent test - Job completed: 1
Concurrent test - Job completed: 2
Concurrent test - Job completed: 3

[90mstdout[2m | infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22m[2mOrder Worker Integration Tests[2m > [22m[2mConcurrent job processing[2m > [22m[2mshould process multiple jobs concurrently
[22m[39mConcurrent test completed: 3 jobs processed

 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mConcurrent job processing[2m > [22mshould process multiple jobs concurrently[33m 855[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mConcurrent job processing[2m > [22mshould respect concurrency limit[33m 1461[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mJob retry and error handling[2m > [22mshould retry failed jobs according to configuration[33m 1203[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mWorker event listeners[2m > [22mshould emit completed event on successful job processing[33m 741[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mWorker event listeners[2m > [22mshould emit failed event on job processing error[33m 738[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mRate limiting[2m > [22mshould respect rate limiter settings[33m 2300[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mEdge cases and data validation[2m > [22mshould handle job with missing orderId gracefully[33m 742[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mEdge cases and data validation[2m > [22mshould handle job with missing checkoutSdkOrderId gracefully[33m 737[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mEdge cases and data validation[2m > [22mshould handle job with empty data object[33m 735[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mEdge cases and data validation[2m > [22mshould handle job with null values in data[33m 735[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mWorker lifecycle[2m > [22mshould handle worker pause and resume[33m 1980[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mWorker lifecycle[2m > [22mshould close worker gracefully[33m 752[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mJob priority and delay[2m > [22mshould process higher priority jobs first[33m 1241[2mms[22m[39m
 [32mâœ“[39m infrastructure/queue/__tests__/order-worker.integration.spec.ts[2m > [22mOrder Worker Integration Tests[2m > [22mJob priority and delay[2m > [22mshould respect job delay[33m 2956[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m19 passed[39m[22m[90m (19)[39m
[2m   Start at [22m 13:08:11
[2m   Duration [22m 21.88s[2m (transform 121ms, setup 173ms, collect 382ms, tests 21.13s, environment 0ms, prepare 14ms)[22m

